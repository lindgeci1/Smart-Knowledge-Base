@page "/selection"
@model SmartKB.Pages.SelectionModel
<link rel="stylesheet" href="~/css/style.css" />

<div class="selection-screen">
    <div class="selection-card">
            <h1>Select what you want to summarize</h1>
            <div class="mode-buttons">
                <a href="/text" class="btn mode-btn">
                    <span class="btn-text">Summarize Text</span>
                </a>
                <a href="/file" class="btn mode-btn" id="fileBtn">
                    <span class="lock-icon" id="fileLock">🔒</span>
                    <span class="btn-text">Summarize File</span>
                </a>
            </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script type="module">
    import { getJwtFromCookie } from "/js/auth.js";

    const token = getJwtFromCookie();
    const fileBtn = document.getElementById("fileBtn");
    const fileLock = document.getElementById("fileLock");

    if (!token) {
        fileLock.style.display = "inline-flex";
        fileBtn.classList.add("locked");
        fileBtn.setAttribute("href", "/login");
        fileBtn.setAttribute("title", "Login required to access this feature");
    } else {
        fileLock.style.display = "none";
        fileBtn.classList.remove("locked");
        fileBtn.setAttribute("href", "/file");
        fileBtn.removeAttribute("title");
    }
</script>
